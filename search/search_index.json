{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Practica 3.2 Despliegue de aplicaciones con Node Express y Netlify.","text":""},{"location":"#despliegue-con-node-express","title":"Despliegue con Node Express.","text":""},{"location":"#introduccion","title":"Introducci\u00f3n","text":"<p>En esta pr\u00e1tica vamos a realizar el despliegue de aplicaciones Node.js sobre un servidor Node Express. En este caso el despliegue no se hace en el servidor, sino que la aplicaci\u00f3n es el servidor.</p>"},{"location":"#instalacion-node-express","title":"Instalaci\u00f3n Node Express.","text":"<p>Primero deberemos instalar Node.js. Pero antes de nada actualizaremos primero el sistema operativo. </p> <pre><code>sudo apt update\nsudo apt upgrade\n</code></pre> <p>Luego ejecutaremos el siguiente comando. </p> <pre><code>curl -sL https://deb.nodesource.com/setup_16.x | sudo -E bash\n</code></pre> <p></p> <p>Despu\u00e9s instalaremos node.js:</p> <pre><code>sudo apt install nodejs.\n</code></pre> <p></p> <p>Tras esto comprobaremos las instalaciones. </p> <p></p> <p>Ahora que ya tenemos instalado Nodejs instalaremos Express.js</p> <pre><code>sudo npm install -g express\n</code></pre> <p></p> <p>Crearemos la carpeta del proyecto, nos metemos dentro de la carpeta e inicializamos el proyecto.</p> <pre><code>mkdir project\ncd proyect\nnpm init -y\n</code></pre> <p></p> <p></p> <p>Una vez ya creada, instalaremos Express.js para este proyecto local y crearemos un archivo de muestra. </p> <pre><code>npm install express\nsudo nano app.js \n</code></pre> <p></p> <p>En este archivo agregaremos lo siguiente. </p> <pre><code>const express = require('express')\nconst app = express()\nconst port = 3000\n\napp.get('/', (req, res) =&gt; {\n    res.send('Hello. Welcome to this blog')\n})\n\napp.listen(port, () =&gt; {\n    console.log(`Example app listening at http://localhost:${port}`)\n})\n</code></pre> <p></p> <p>Ahora ejecutaremos el proyecto con el siguiente comando :</p> <pre><code>node app.js\n</code></pre> <p> </p>"},{"location":"#despliegue-de-una-nueva-aplicacion","title":"Despliegue de una nueva aplicaci\u00f3n.","text":"<p>Primero deberemos clonar el reposito y entrar en la carpeta del repositorio. </p> <pre><code>git clone https://github.com/MehedilslamRipon/Shopping-Cart-Application\ncd Shopping-Cart-Application\n</code></pre> <p></p> <p>Instalaremos las librerias necesarias:</p> <pre><code>npm install\n</code></pre> <p></p> <p>Y por \u00faltimo correremos la aplicaci\u00f3n.</p> <pre><code>npm run start\n</code></pre> <p></p> <p>El problema de nodemon se soluciona con el siguiente comando  IMAGEN.   </p>"},{"location":"#despliegue-netlify","title":"Despliegue Netlify.","text":""},{"location":"#introduccion_1","title":"Introducci\u00f3n.","text":"<p>Esta p\u0155actica se acerca m\u00e1s a la realidad ya que utilizaremos un repositorio de githus PaaS como Netlify para desplegar adecuadamente nuestra aplicaci\u00f3n en producci\u00f3n.  \u00bfQue es Github? Es un servicio basado en la nube que aloja un sit. Este permite a los desarrolladores colaborar y realizar cambios en proyectos compartidos a la vez que mantienen un seguimiento detallado de su proceso. </p> <p>\u00bfQue es Netlify? Es un proveedor de alojamiento en la nube que proporciona servicios de backend sin servidor para sitios web st\u00e1ticos. Estaa dise\u00f1ado para maximizar la productividad en el sentido de que permite a los desarrolladores, y a los ingenieros construir, probar y desplegar rapidamente sitios web/aplicaciones. </p>"},{"location":"#creacion-de-nuestra-aplicacion","title":"Creaci\u00f3n de nuestra aplicaci\u00f3n.","text":"<p>Tras logearnos por SSH en nuestro debian, nos crearemos un directorio para albergar la aplicaci\u00f3n con el nombre que queramos. En ese directorio crearemos 3 archivos, dos html y un .js que conformar\u00e1n la aplicaci\u00f3n.</p> <p>Head.html IMAGEN</p> <p>Tail.html IMAGEN </p> <p>Aplicacion.js </p> <p>Ahora para crear nuestra aplicacion Node.js, con el fin de crear el archivo package.json, pondremos este comando: </p> <p></p> <p></p> <p>Y podemos probar  que nuestra aplicacion funciona perfectamente en local. </p> <p></p>"},{"location":"#aplicacion-para-netlify","title":"Aplicacion para Netlify","text":"<p>Vamos a usar una aplicaci\u00f3n ya creada para centrarnos en el despliegue.  Primero clonaremos este repositorio.  IMAG Realizaremos dos tipos de despliegue. Despliegue manuel desde CLI de nitlify y despliegue desde un c\u00f3digo publicado en uno de nuestros repositorios de github. </p>"},{"location":"#despliegue-mediante-cli","title":"Despliegue mediante CLI.","text":"<p>Clonamos el siguiente repositorio. Una vez registrado , debemos instalar el CLI de netlify para ejecutar sus comandos desde la terminal. </p> <p></p> <p>Ahora nos autenticaremos mediante el siguiente comando  para realizar acciones de deploy.</p> <p>El cual nos muestra por pantalla del navegador para que concedamos la autorizaci\u00f3n pertinente. Sin embargo, recordemos el problema de que estamos conectados por SSH a nuestro servidor y no tenemos la posibilidad de uso de un entorno gr\u00e1fico. Seguiremos las instrucciones de la documentacion  1. Generamos el token de acceso  2. Lo establecemos como variable de ambiente  3. Y nos logueamos</p> <p></p> <p>Previamente al despliegue haremos un build de la aplicaci\u00f3n. Para ello debemos instalar todas las dependencias . </p> <p></p> <p>Cuando las tengamos instaladas podemos realizar el build . </p> <p></p> <p>Esto nos crear\u00e1 una nueva carpeta llamada build que contendr\u00e1 la aplicaci\u00f3n que debemos desplegar. Y ya podeos hacer un pre-deploy de la aplicaci\u00f3n de la que hemos hecho antes. Tendremos que introducir unos parametros </p> <p></p> <p>Si nos indica que ha ido bien podemos pasarla a produccion finalmente. Nos deber\u00eda pasar el siguiente comando.  Y acceder al despliegue en netlify.</p> <p></p>"},{"location":"#despliegue-mediante-conexion-con-github","title":"Despliegue mediante conexi\u00f3n con Github.","text":"<p>En primer lugar eliminaremos el site que hemos desplegado antes en netlify para evitarnos problemas.  En segundo lugar vamos a borrar el directorio donde se halla el repositorio clonado en el paso anterior para as\u00ed empezar desde 0. </p> <p>Como queremos simular que hemos picado el c\u00f3digo a man o en local y lo vamos a pasar a github pro primera vez, nos descargaremos los fuentes en formato .zip sin que tenga ninguna referencia a github. </p> <p></p> <p>Creamos la carpeta y descomprimimos dentro del zip. </p> <pre><code>mkdir practica3.4\nunzip main.zip -d practica3.4/ \n</code></pre> <p></p> <p>Entramos en la carpeta donde est\u00e1 el c\u00f3digo.  Ahora debemos crear un resitorio completamente vac\u00edo que se llame practicaTresCuatro.</p> <p></p> <p>Volviendo a la terminal a la carpeta donde est\u00e1bamos, la iniciamos como repositorio hacmeos un commit y la rama Main. </p> <p></p> <p>Ahora solo queda referenciar nuestra carpeta al repositorio reci\u00e9n creado en github y hacer un push para subir todo. </p> <p></p> <p>Ahora que ya tenemos subido el c\u00f3digo a github, de alguna manera debemos enlazar nuestra cuenta de githubcon la de Netlify para que este \u00faltio pueda traerse el c\u00f3digo de all\u00ed, hacer el build y desplegarlo. As\u00ed entraremos en nuestro dashboard de netlify y le damos a importar proyecto existente de git. </p> <p></p> <p>Le indicamos que es de github.</p> <p></p> <p>Y nos saltar\u00e1 una ventana pidiendo que autoricemos a Netlify a acceder a nuestros repositorios de Github:</p> <p></p> <p>Y luego le indicaremos que no acceda a todos nuestros repositorios sino s\u00f3lo al repositorio que necesitamos, que es donde tenemos el c\u00f3digo de nuestra aplicaci\u00f3n:</p> <p></p> <p>Y desplegamos la aplicaci\u00f3n. </p> <p>Netlify se encargar\u00e1 de hacer el build de forma autom\u00e1tica tal y como hemos visto en la imagen de arriba con el comando npm run build publicando el contenido del directorio build.  Y ya quedar\u00e1 todo listo. </p> <p></p> <p>De esta forma, cada cambio que hagamos, en el proyecto, se actualizar\u00e1 con un commit y push. Con esto har\u00e1 un nuevo despliegue en Netlify. </p>"},{"location":"#comprobaciones","title":"Comprobaciones.","text":"<ul> <li>DEsntro de la carpeta public encontramos el archivo robots.txt, cuyo cometido es indicar a los rastreadores de los buscadores a que URLs del sitio puden acceder. A este archivo se puede acceder desde la URL del sitio. </li> </ul> <ul> <li>DEntro de la carpeta public, utilizando el editor de texto que prefirais para modificar el archivo robots.txt para que excluya un directorio que se llame nombre_apellido, con vuestros datos. </li> </ul> <ul> <li>Haz un nuevo commit y push  del caso anterior, recuerda el comando git previo para a\u00f1adir los archivos a hacer commit. </li> <li>Comprueba en el dashboard de netlify que se ha producido un nuevo deploy de la aplicacion hace escasos segundos. </li> </ul> <ul> <li>Accede a https://url_de_la_aplicacion/robots.txt y comprueba que, efectivamente, se ve reflejado el cambio.</li> </ul>"}]}